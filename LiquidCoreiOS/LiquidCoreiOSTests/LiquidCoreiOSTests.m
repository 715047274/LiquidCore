//
//  LiquidCoreiOSTests.m
//  LiquidCoreiOSTests
//
//  Created by Eric Lange on 1/28/18.
//  Copyright Â© 2018 LiquidPlayer. All rights reserved.
//

#import <XCTest/XCTest.h>
#import "helloworld.h"

extern int cctest_main(int argc, char* argv[]);

@interface LiquidCoreiOSTests : XCTestCase

@end

@implementation LiquidCoreiOSTests

- (void)setUp {
    [super setUp];
    // Put setup code here. This method is called before the invocation of each test method in the class.
}

- (void)tearDown {
    // Put teardown code here. This method is called after the invocation of each test method in the class.
    [super tearDown];
}

#undef V
#define V(tst) \
- (void)testCcPassing##tst { \
char *argv[] = { "cctest", "test-api/" #tst }; \
cctest_main(2, argv); \
}


/******* PASSING TESTS *******/
V(InitializeAndDisposeOnce)
V(InitializeAndDisposeMultiple)
V(SmiZero)
V(Handles)
V(IsolateOfContext)
V(HulIgennem)
V(Access)
V(AccessElement)
V(Script)
V(ScriptUsingStringResource)
V(ScriptUsingOneByteStringResource)
V(ScriptMakingExternalString)
V(ScriptMakingExternalOneByteString)
V(MakingExternalStringConditions)
V(MakingExternalOneByteStringConditions)
V(MakingExternalUnalignedOneByteString)
V(UsingExternalString)
V(UsingExternalOneByteString)
V(NewExternalForVeryLongString)
V(ScavengeExternalString)
V(ScavengeExternalOneByteString)
V(ExternalStringWithDisposeHandling)
V(StringConcat)
V(GlobalProperties)
V(ExternalWrap)
V(TinyInteger)
V(BigSmiInteger)
V(BigInteger)
V(TinyUnsignedInteger)
V(BigUnsignedSmiInteger)
V(BigUnsignedInteger)
V(OutOfSignedRangeUnsignedInteger)
V(IsNativeError)
V(IsGeneratorFunctionOrObject)
V(IsAsyncFunction)
V(ArgumentsObject)
V(IsMapOrSet)
V(StringObject)
V(StringObjectDelete)
V(NumberObject)
V(BooleanObject)
V(PrimitiveAndWrappedBooleans)
V(Number)
V(ToNumber)
V(Date)
V(Boolean)
V(IntegerValue)
V(UndefinedIsNotEnumerable)
V(DeepCrossLanguageRecursion)
V(GetSetProperty)
V(TypeOf)
V(ScriptException)
V(LocalHandle)
V(ReceiverSignature) // Start ObjectTemplate/FunctionTemplate tests
V(FunctionTemplateWithProfiler)
V(FunctionTemplate)
V(SimpleCallbackWithProfiler)
V(SimpleCallback)
V(FastReturnValuesWithProfiler)
V(FastReturnValues)
V(FunctionTemplateSetLength)
V(FindInstanceInPrototypeChain)
V(GlobalPrototype)
V(ObjectTemplate)
V(FunctionPrototype)
V(ConstructCall)
V(TestObjectTemplateInheritedWithAccessorsInPrototype1)
V(TestObjectTemplateInheritedWithAccessorsInPrototype2)
V(TestObjectTemplateInheritedWithAccessorsInPrototype3)
V(TestObjectTemplateInheritedWithPrototype1)
V(TestObjectTemplateInheritedWithPrototype2)
V(TestObjectTemplateClassInheritance)
V(TestObjectTemplateReflectConstruct)
V(DescriptorInheritance)
V(DescriptorInheritance2)
V(CallbackExceptionRegression)
V(InternalFields)
V(GlobalObjectInternalFields)
V(GlobalObjectHasRealIndexedProperty)
V(InternalFieldsAlignedPointers)
V(SetAlignedPointerInInternalFields)
V(SymbolIdentityHash)
V(StringIdentityHash)
V(SymbolProperties)
V(SymbolTemplateProperties)
V(GlobalSymbols)
V(GlobalSymbolsNoContext)
V(WellKnownSymbols)
V(EmbedderDataAlignedPointers)
V(EmbedderData)
V(IdentityHash)
V(PrivatePropertiesOnProxies)
V(PrivateProperties)
V(GlobalPrivates)
V(HiddenProperties)
V(ArrayBuffer_ApiInternalToExternal)
V(ArrayBuffer_JSInternalToExternal)
V(ArrayBuffer_External)
V(Regress97784)
V(ExternalScriptException)
V(EvalInTryFinally)
V(ExceptionOrder)
V(ThrowValues)
V(CatchZero)
V(CatchExceptionFromWith)
V(TryCatchAndFinallyHidingException)
V(TryCatchAndFinally)
V(Array)
V(Vector)
V(ConversionException)
V(APICatch)
V(APIThrowTryCatch)
V(TryCatchInTryFinally)
V(MultiRun)
V(SimplePropertyRead)
V(DefinePropertyOnAPIAccessor)
V(DefinePropertyOnDefineGetterSetter)
V(ElementAPIAccessor)
V(SimplePropertyWrite)
V(SetterOnly)
V(NoAccessors)
V(Regress892105)
V(PersistentHandles)
V(GlobalObjectTemplate)
V(DeleteAccessor)
V(IsUint8Array)
V(IsInt8Array)
V(IsUint16Array)
V(IsInt16Array)
V(IsUint32Array)
V(IsInt32Array)
V(IsFloat32Array)
V(IsFloat64Array)
V(IsUint8ClampedArray)
V(IsDataView)
V(Map)
V(MapDeleteThenAsArray)
V(Set)
V(SetDeleteThenAsArray)
V(IsConstructCall)
V(ObjectInstantiation)
V(CompilationErrorUsingTryCatchHandler)
V(TryCatchFinallyUsingTryCatchHandler)
V(GetterSetterExceptions)
V(Version)
V(InstanceProperties)
V(CatchStackOverflow)
V(DateAccess)
V(CompileExternalTwoByteSource)
V(GetCurrentContextWhenNotInContext)
V(SealHandleScope)
V(SealHandleScopeNested)
V(StaticGetters)
V(IsolateEmbedderData)
V(StringEmpty)
V(SimpleExtensions)
V(NullExtensions)
V(ExtensionMissingSourceLength)
V(ExtensionWithSourceLength)
V(UseEvalFromExtension)
V(UseWithFromExtension)
V(AutoExtensions)
V(SyntaxErrorExtensions)
V(ExceptionExtensions)
V(NativeFunctionDeclaration)
V(NativeFunctionDeclarationError)
V(NativeFunctionDeclarationErrorEscape)
V(ExtensionDependency)
V(FunctionLookup)
V(GlobalProxyIdentityHash)
V(GlobalObjectInstanceProperties)
V(DefineAPIAccessorOnObject)
V(Arguments)
V(AccessCheckInIC)
V(BooleanCheckMultipleContexts)
V(CallAPIFunctionOnNonObject)
V(CallICFastApi_DirectCall_GCMoveStub)
V(CallICFastApi_DirectCall_Throw)
V(CallICFastApi_TrivialSignatureWithProfiler)
V(CallICFastApi_TrivialSignature)
V(LoadICFastApi_DirectCall_GCMoveStubWithProfiler)
V(LoadICFastApi_DirectCall_GCMoveStub)
V(LoadICFastApi_DirectCall_Throw)
V(CallKnownGlobalReceiver)
V(ChainSignatureCheck)
V(CheckForCrossContextObjectLiterals)
V(CompatibleReceiverCheckOnCachedICHandler)
V(CrossActivationEval)
V(DataView)
V(DictionaryICLoadedFunction)
V(Equals)
V(EvalAliasedDynamic)
V(FunctionCall)
V(FunctionDescriptorException)
V(FunctionPrototypeAcrossContexts)
V(GlobalHandle)
V(GlobalHandleUpcast)
V(HandleEquality)
V(InitGlobalVarInProtoChain)
V(InitializeDefaultIsolateOnSecondaryThread1)
V(InternalFieldsOnGlobalProxy)
V(IsolateDifferentContexts)
V(NestedHandleScopeAndContexts)
V(StringCheckMultipleContexts)
V(NumberCheckMultipleContexts)
V(PropertyEnumeration2)
V(ReceiverConversionForAccessors)
V(Regress157124)
V(Regress2333)
V(Regress2535)
V(Regress2746)
V(Regress260106)
V(Regress54)
V(Regress618)
V(SemaphoreInterruption)
V(SetterOnConstructorPrototype)
V(SimpleSignatureCheck)
V(SubclassGetConstructorName)
V(TryCatchCustomException)
V(Utf16MissingTrailing)
V(WrapperClassId)
V(PrivateForApiIsNumber)
V(Uint8Array)
V(Int8Array)
V(Uint16Array)
V(Int16Array)
V(Uint32Array)
V(Int32Array)
V(Float32Array)
V(Float64Array)
V(Uint8ClampedArray)
V(External)
V(PropertyAttributes)
V(ConversionNumber)
V(isNumberType)
V(Equality)
V(ReadOnlyPropertyInGlobalProto)
V(ReadOnlyIndexedProperties)

#undef V
#define V(tst) \
- (void)testCc##tst { \
char *argv[] = { "cctest", "test-api/" #tst }; \
cctest_main(2, argv); \
}

V(StackTraceInExtension)
V(AccessorIsPreservedOnAttributeChange)
V(ResettingGlobalHandle)
V(ResettingGlobalHandleToEmpty)
V(Global)
V(TwoPassPhantomCallbacks)
V(TwoPassPhantomCallbacksNestedGc)
V(GlobalValueMap)
V(PersistentValueVector)
V(MessageHandler0)
V(MessageHandler1)
V(MessageHandler2)
V(MessageHandler3)
V(MessageHandler4)
V(MessageHandler5)
V(NativeWeakMap)
V(CustomErrorToString)
V(CustomErrorMessage)
V(CustomErrorRethrowsOnToString)
V(APIThrowMessage)
V(APIThrowMessageAndVerboseTryCatch)
V(APIStackOverflowAndVerboseTryCatch)
V(TryCatchNested)
V(TryCatchMixedNesting)
V(TryCatchNative)
V(TryCatchNativeReset)
V(InstanceOf)
V(DontDeleteAPIAccessorsCannotBeOverriden)
V(MultiContexts)
V(UndetectableObject)
V(VoidLiteral)
V(ExtensibleOnUndetectable)
V(NativeFunctionConstructCall)
V(ErrorReporting)
V(ErrorWithMissingScriptInfo)
V(IndependentWeakHandle)
V(InternalFieldCallback)
V(ResetWeakHandle)
V(GCFromWeakCallbacks)
V(GetterHolders)
V(PreInterceptorHolders)
V(StringWrite)
V(Utf16)
V(Utf16Symbol)
V(Utf16Trailing3Byte)
V(ToArrayIndex)
V(ErrorConstruction)
V(ExceptionCreateMessage)
V(ExceptionCreateMessageLength)
V(ApiUncaughtException)
V(ExceptionInNativeScript)
V(TryCatchFinallyStoresMessageUsingTryCatchHandler)
V(SecurityHandler)
V(SecurityChecks)
V(SecurityChecksForPrototypeChain)
V(SecurityTestGCAllowed)
V(CrossDomainDelete)
V(CrossDomainPropertyIsEnumerable)
V(CrossDomainFor)
V(CrossDomainForInOnPrototype)
V(ContextDetachGlobal)
V(DetachGlobal)
V(DetachedAccesses)
V(AccessControl)
V(AccessControlES5)
V(AccessControlGetOwnPropertyNames)
V(Regress470113)
V(CrossDomainAccessors)
V(AccessControlIC)
V(ObjectGetOwnPropertyNames)
V(ShadowObject)
V(HiddenPrototype)
V(HiddenPrototypeSet)
V(HiddenPrototypeIdentityHash)
V(SetPrototype)
V(Regress91517)
V(Regress269562)
V(FunctionReadOnlyPrototype)
V(SetPrototypeThrows)
V(FunctionRemovePrototype)
V(Constructor)
V(ConstructorForObject)
V(CrossEval)
V(EvalInDetachedGlobal)
V(CrossLazyLoad)
V(CallAsFunction)
V(CallableObject)
V(Regress567998)
V(HandleIteration)
V(InterceptorCallICFastApi_TrivialSignatureWithProfiler)
V(InterceptorCallICFastApi_TrivialSignature)
V(InterceptorCallICFastApi_SimpleSignatureWithProfiler)
V(InterceptorCallICFastApi_SimpleSignature)
V(InterceptorCallICFastApi_SimpleSignature_Miss1WithProfiler)
V(InterceptorCallICFastApi_SimpleSignature_Miss1)
V(InterceptorCallICFastApi_SimpleSignature_Miss2WithProfiler)
V(InterceptorCallICFastApi_SimpleSignature_Miss2)
V(InterceptorCallICFastApi_SimpleSignature_Miss3WithProfiler)
V(InterceptorCallICFastApi_SimpleSignature_Miss3)
V(InterceptorCallICFastApi_SimpleSignature_TypeErrorWithProfiler)
V(InterceptorCallICFastApi_SimpleSignature_TypeError)
V(CallICFastApi_SimpleSignatureWithProfiler)
V(CallICFastApi_SimpleSignature)
V(CallICFastApi_SimpleSignature_Miss1WithProfiler)
V(CallICFastApi_SimpleSignature_Miss1)
V(CallICFastApi_SimpleSignature_Miss2WithProfiler)
V(CallICFastApi_SimpleSignature_Miss2)
V(CallICFastApi_SimpleSignature_TypeErrorWithProfiler)
V(CallICFastApi_SimpleSignature_TypeError)
V(VariousGetPropertiesAndThrowingCallbacks)
V(ExceptionsDoNotPropagatePastTryCatch)
V(Overriding)
V(AccessorShouldThrowOnError)
V(InterceptorShouldThrowOnError)
V(NewTargetHandler)
V(ObjectProtoToString)
V(ObjectProtoToStringES6)
V(ObjectGetConstructorName)
V(Threading1)
V(Threading2)
V(Threading3)
V(Threading4)
V(Threading5)
V(Threading6)
V(Threading7)
V(Threading8)
V(NestedLockers)
V(NestedLockersNoTryCatch)
V(RecursiveLocking)
V(LockUnlockLock)
V(DontLeakGlobalObjects)
V(CopyablePersistent)
V(WeakCallbackApi)
V(NewPersistentHandleFromWeakCallback)
V(DoNotUseDeletedNodesInSecondLevelGc)
V(NoGlobalHandlesOrphaningDueToWeakCallback)
V(SetFunctionEntryHook)
V(SetJitCodeEventHandler)
V(ExternalAllocatedMemory)
V(Regress51719)
V(TryCatchSourceInfo)
V(TryCatchSourceInfoForEOSError)
V(CompilationCache)
V(CallbackFunctionName)
V(PropertyEnumeration)
V(PropertyNames)
V(AccessChecksReenabledCorrectly)
V(PreCompileSerialization)
V(CrossContextNew)
V(ObjectClone)
V(MorphCompositeStringTest)
V(RegExpInterruption)
V(CreateDataProperty)
V(DefineOwnProperty)
V(DefineProperty)
V(ReplaceConstantFunction)
V(SkipArrayBufferBackingStoreDuringGC)
V(SkipArrayBufferDuringScavenge)
V(SharedUint8Array)
V(SharedInt8Array)
V(SharedUint16Array)
V(SharedInt16Array)
V(SharedUint32Array)
V(SharedInt32Array)
V(SharedFloat32Array)
V(SharedFloat64Array)
V(SharedUint8ClampedArray)
V(SharedDataView)
V(ScriptContextDependence)
V(StackTrace)
V(CaptureStackTrace)
V(CaptureStackTraceForUncaughtException)
V(CaptureStackTraceForUncaughtExceptionAndSetters)
V(AsmJsWarning)
V(ErrorLevelWarning)
V(GetStackTraceContainsFunctionsWithFunctionName)
V(RethrowStackTrace)
V(RethrowPrimitiveStackTrace)
V(RethrowExistingStackTrace)
V(RethrowBogusErrorStackTrace)
V(PromiseRejectCallback)
V(SourceURLInStackTrace)
V(ScriptIdInStackTrace)
V(InlineScriptWithSourceURLInStackTrace)
V(PromiseHook)
V(DynamicWithSourceURLInStackTrace)
V(DynamicWithSourceURLInStackTraceString)
V(EvalWithSourceURLInMessageScriptResourceNameOrSourceURL)
V(RecursionWithSourceURLInMessageScriptResourceNameOrSourceURL)
V(TestIdleNotification)
V(SetStackLimit)
V(SetStackLimitInThread)
V(GetHeapStatistics)
V(ExternalizeOldSpaceTwoByteCons)
V(ExternalizeOldSpaceOneByteCons)
V(VisitExternalStrings)
V(ExternalStringCollectedAtTearDown)
V(ExternalInternalizedStringCollectedAtTearDown)
V(ExternalInternalizedStringCollectedAtGC)
V(QuietSignalingNaNs)
V(SpaghettiStackReThrow)
V(Regress528)
V(ScriptOrigin)
V(FunctionGetInferredName)
V(FunctionGetDebugName)
V(FunctionGetDisplayName)
V(ScriptLineNumber)
V(ScriptColumnNumber)
V(FunctionGetScriptId)
V(FunctionGetBoundFunction)
V(InterceptorOnConstructorPrototype)
V(GCCallbacksOld)
V(GCCallbacksWithData)
V(GCCallbacks)
V(TwoByteStringInOneByteCons)
V(ContainsOnlyOneByte)
V(GCInFailedAccessCheckCallback)
V(IsolateNewDispose)
V(DisposeIsolateWhenInUse)
V(VerifyArrayPrototypeGuarantees)
V(RunTwoIsolatesOnSingleThread)
V(MultipleIsolatesOnIndividualThreads)
V(InitializeDefaultIsolateOnSecondaryThread2)
V(InitializeDefaultIsolateOnSecondaryThread3)
V(InitializeDefaultIsolateOnSecondaryThread4)
V(InitializeDefaultIsolateOnSecondaryThread5)
V(DontDeleteCellLoadIC)
V(PersistentHandleVisitor)
V(PersistentHandleInNewSpaceVisitor)
V(RegExp)
V(NamedEnumeratorAndForIn)
V(DefinePropertyPostDetach)
V(CreationContext)
V(CreationContextOfJsFunction)
V(CreationContextOfJsBoundFunction)
V(HasOwnProperty)
V(IndexedInterceptorWithStringProto)
V(AllowCodeGenFromStrings)
V(SetErrorMessageForCodeGenFromStrings)
V(CaptureSourceForCodeGenFromStrings)
V(Regress1516)
V(Regress93759)
V(ForeignFunctionReceiver)
V(CallCompletedCallback)
V(CallCompletedCallbackOneException)
V(CallCompletedCallbackTwoExceptions)
V(EnqueueMicrotask)
V(RunMicrotasksIgnoresThrownExceptions)
V(SetAutorunMicrotasks)
V(RunMicrotasksWithoutEnteringContext)
V(ScopedMicrotasks)
V(CheckCOWArraysCreatedRuntimeCounter)
V(InstanceCheckOnInstanceAccessor)
V(InstanceCheckOnInstanceAccessorWithInterceptor)
V(InstanceCheckOnPrototypeAccessor)
V(TryFinallyMessage)
V(Regress137002a)
V(Regress137002b)
V(Regress142088)
V(Regress137496)
V(JSONParseObject)
V(JSONParseNumber)
V(JSONParseArray)
V(JSONStringifyObject)
V(JSONStringifyObjectWithGap)
V(JSONStringifyAccessCheck)
V(AccessCheckThrows)
V(RequestInterruptTestWithFunctionCall)
V(RequestInterruptTestWithMethodCall)
V(RequestInterruptTestWithAccessor)
V(RequestInterruptTestWithNativeAccessor)
V(RequestInterruptTestWithMethodCallAndInterceptor)
V(RequestInterruptTestWithMathAbs)
V(RequestMultipleInterrupts)
V(RequestInterruptSmallScripts)
V(FunctionNew)
V(EscapeableHandleScope)
V(Regress239669)
V(FunctionCallOptimization)
V(FunctionCallOptimizationMultipleArgs)
V(ApiCallbackCanReturnSymbols)
V(EmptyApiCallback)
V(PrototypeSignatureCheck)
V(EventLogging)
V(PropertyDescriptor)
V(Promises)
V(PromiseThen)
V(PromiseStateAndValue)
V(DisallowJavascriptExecutionScope)
V(AllowJavascriptExecutionScope)
V(ThrowOnJavascriptExecution)
V(Regress354123)
V(CaptureStackTraceForStackOverflow)
V(ScriptNameAndLineNumber)
V(ScriptPositionInfo)
V(ScriptSourceURLAndSourceMappingURL)
V(GetOwnPropertyDescriptor)
V(Regress411877)
V(GetHiddenPropertyTableAfterAccessCheck)
V(Regress411793)
V(StreamingSimpleScript)
V(StreamingScriptConstantArray)
V(StreamingScriptEvalShadowing)
V(StreamingBiggerScript)
V(StreamingScriptWithParseError)
V(StreamingUtf8Script)
V(StreamingUtf8ScriptWithSplitCharactersSanityCheck)
V(StreamingUtf8ScriptWithSplitCharacters)
V(StreamingUtf8ScriptWithSplitCharactersValidEdgeCases)
V(StreamingUtf8ScriptWithSplitCharactersInvalidEdgeCases)
V(StreamingProducesParserCache)
V(StreamingWithDebuggingEnabledLate)
V(StreamingScriptWithInvalidUtf8)
V(StreamingUtf8ScriptWithMultipleMultibyteCharactersSomeSplit)
V(StreamingUtf8ScriptWithMultipleMultibyteCharactersSomeSplit2)
V(StreamingWithHarmonyScopes)
V(CodeCache)
V(InvalidParserCacheData)
V(InvalidCodeCacheData)
V(ParserCacheRejectedGracefully)
V(StringConcatOverflow)
V(TurboAsmDisablesNeuter)
V(GetPrototypeAccessControl)
V(GetPrototypeHidden)
V(ClassPrototypeCreationContext)
V(SimpleStreamingScriptWithSourceURL)
V(StreamingScriptWithSplitSourceURL)
V(StreamingScriptWithSourceMappingURLInTheMiddle)
V(NewStringRangeError)
V(ExtrasFunctionSource)
V(ExtrasBindingObject)
V(ExperimentalExtras)
V(ExtrasUtilsObject)
V(FutexInterruption)
V(AbortOnUncaughtExceptionNoAbort)
V(AccessCheckedIsConcatSpreadable)
V(AccessCheckedToStringTag)
V(TemplateIteratorPrototypeIntrinsics)
V(TemplateErrorPrototypeIntrinsics)
V(ObjectTemplateArrayProtoIntrinsics)
V(ObjectTemplatePerContextIntrinsics)
V(Proxy)
V(MemoryPressure)
V(SetIntegrityLevel)
V(ImmutableProto)
V(EvalInAccessCheckedContext)
V(ImmutableProtoWithParent)
V(ImmutableProtoGlobal)
V(MutableProtoGlobal)
V(InternalFieldsOnTypedArray)
V(InternalFieldsOnDataView)
V(SetPrototypeTemplate)
V(GlobalAccessorInfo)
V(IncreaseHeapLimitForDebugging)
V(DeterministicRandomNumberGeneration)
V(AllowAtomicsWait)
V(CorrectEnteredContext)
V(DynamicImport)

#undef V
#define V(tst) \
;

// Incompatible tests
// Neutering is not supported on JavaScriptCore
V(ArrayBuffer_DisableNeuter)
V(ArrayBuffer_NeuteringApi)
V(ArrayBuffer_NeuteringScript)
// SharedArrayBuffers are implemented in JSC, but not via API
// They are also disabled by default in V8
V(SharedArrayBuffer_ApiInternalToExternal)
V(SharedArrayBuffer_JSInternalToExternal)
V(SharedArrayBuffer_External)
// Native calls (%<func>) not supported in JSC
V(NativeCallInExtensions)
// Fixed typed arrays are internal constructs, not accessible to the API
V(FixedUint8Array)
V(FixedUint8ClampedArray)
V(FixedInt8Array)
V(FixedUint16Array)
V(FixedInt16Array)
V(FixedUint32Array)
V(FixedInt32Array)
V(FixedFloat32Array)
V(FixedFloat64Array)


@end
